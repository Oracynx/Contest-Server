<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaderboard</title>
    <link rel="icon" href="data:,">
    <link rel="stylesheet" href="./css/style.css">
    
    <style>
        .container {
            max-width: 1100px;
            padding: 20px;
        }

        /* 列表头：保持普通文档流 */
        .lb-header {
            display: grid;
            grid-template-columns: 60px 2fr 100px 150px;
            gap: 15px;
            padding: 15px;
            font-weight: bold;
            color: #666;
            background-color: #f8f9fa;
            border-bottom: 2px solid #eee;
            border-radius: 8px 8px 0 0;
            z-index: 10;
            position: relative;
        }

        /* 列表容器：关键！需要相对定位来容纳绝对定位的子元素 */
        #lb-body {
            position: relative; 
            width: 100%;
            /* 高度将由 JS 动态计算，否则会塌陷为 0 */
            transition: height 0.3s ease; 
            background-color: #fff;
        }

        /* 单行样式：绝对定位 */
        .lb-row {
            position: absolute; /* 核心：脱离文档流 */
            left: 0;
            top: 0; /* 默认值，会被 JS 修改 */
            width: 100%;
            height: 60px; /* 固定高度，方便计算 */
            
            display: grid;
            grid-template-columns: 60px 2fr 100px 150px;
            gap: 15px;
            align-items: center;
            padding: 0 15px;
            
            background-color: #fff;
            border-bottom: 1px solid #eee;
            box-sizing: border-box; /* 确保 padding 不增加高度 */
            
            /* 核心动画属性 */
            transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            
            /* 性能优化 */
            will-change: transform;
            backface-visibility: hidden;
        }

        /* 移动端适配 */
        @media (max-width: 600px) {
            .lb-header, .lb-row {
                grid-template-columns: 40px 1fr 60px;
                gap: 10px;
                font-size: 0.9rem;
            }
            .col-hide-mobile { display: none; }
        }

        /* 工具类 */
        .text-center { text-align: center; }
        .font-bold { font-weight: bold; }
        .score-txt { color: var(--primary-color); }
        .count-txt { font-size: 0.8rem; color: #999; }

        /* --- 新增：作品信息区域样式 --- */

        /* 1. 容器：Flex 布局确保图片和文字在同一行，并垂直居中 */
        .work-info {
            display: flex;
            align-items: center;      /* 垂直居中 */
            justify-content: center; /* 水平左对齐（标题类通常左对齐） */
            height: 100%;
            width: 100%;
            overflow: hidden;         /* 防止内容溢出 */
        }

        /* 2. 图片：卡片效果、圆角、固定尺寸 */
        .work-thumb {
            width: 44px;
            height: 44px;
            border-radius: 8px;       /* 圆角 */
            object-fit: cover;        /* 保持图片比例填充，不拉伸 */
            
            /* 卡片效果：边框 + 轻微阴影 */
            border: 1px solid #eee;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
            
            margin-right: 12px;       /* 图片与文字的间距 */
            flex-shrink: 0;           /* 关键：防止标题过长时图片被挤压 */
            background-color: #f8f9fa;/* 图片加载失败时的占位背景色 */
        }

        /* 3. 标题文字：单行显示，超长省略 */
        .title-txt {
            font-weight: 600;         /* 稍微加粗 */
            color: #333;
            white-space: nowrap;      /* 强制不换行 */
            overflow: hidden;
            text-overflow: ellipsis;  /* 超出部分显示省略号 */
        }
    </style>
    
    <script src="./js/leaderboard.js" defer></script>
</head>

<body>

    <div class="container">
        <h2 style="margin-bottom: 20px;">实时排行榜</h2>
        
        <div class="lb-header">
            <div class="text-center">#</div>
            <div>作品名称</div>
            <div class="text-center">分数</div>
            <div class="text-center col-hide-mobile">投票数</div>
        </div>

        <div id="lb-body">
            <!-- JS 将生成绝对定位的行放在这里 -->
        </div>
        
        <div style="margin-top: 30px;">
            <a href="/">返回首页</a>
        </div>
    </div>

</body>

</html>